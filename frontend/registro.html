<!DOCTYPE html>

<html lang="es">

<head>

 <meta charset="UTF-8" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

 <title>Registro - ManabiGames</title>



 <!-- Tailwind CSS -->

 <script src="https://cdn.tailwindcss.com"></script>



 <!-- SweetAlert2 -->

 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>



 <!-- Tipografía Synthwave -->

 <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;700&display=swap" rel="stylesheet" />



 <style>

  body {

   font-family: 'Rajdhani', sans-serif;

   background: #0a0a0a;

   background-image: url('https://www.transparenttextures.com/patterns/stardust.png');

   color: #00ffcc;

  }

  .manabi-input {

   background-color: #1a1a1a;

   border: 1px solid #00ffcc;

   color: white;

  }

  .manabi-input:focus {

   outline: none;

   border-color: #ff2e9d;

   box-shadow: 0 0 0 2px #ff2e9d88;

  }

 </style>

</head>

<body class="flex items-center justify-center min-h-screen">



 <div class="bg-[#141414] p-8 rounded-2xl shadow-2xl border border-[#6c63ff] w-full max-w-md">

  <h2 class="text-3xl font-bold text-center text-[#ff2e9d] mb-6">Registro ManabiGames</h2>



  <form id="loginForm" class="space-y-6">

   <div>

    <label class="block text-[#00ffcc] font-semibold" for="usuario">Usuario</label>

    <input name="usuario" id="usuario" type="text" class="manabi-input w-full px-4 py-2 rounded-lg" placeholder="Ingresa tu usuario" />

   </div>



   <div>

    <label class="block text-[#00ffcc] font-semibold" for="correo">Correo Electrónico</label>

    <input name="correo" id="correo" type="email" class="manabi-input w-full px-4 py-2 rounded-lg" placeholder="ejemplo@correo.com" />

   </div>



   <div>

    <label class="block text-[#00ffcc] font-semibold" for="clave">Contraseña</label>

    <input name="clave" id="clave" type="password" class="manabi-input w-full px-4 py-2 rounded-lg" placeholder="********" />

   </div>



   <button type="submit" class="w-full py-2 rounded-lg font-bold text-white bg-gradient-to-r from-[#00ffcc] to-[#6c63ff] hover:from-[#ff2e9d] hover:to-[#6c63ff] transition-all">

    Registrarse

   </button>

   
   <div class="text-center mt-4">

    <a href="index.html" class="text-[#00ffcc] hover:text-[#ff2e9d] transition-colors">¿Ya tienes cuenta? Iniciar sesión</a>

   </div>

  </form>

 </div>



 <script>

  const SUPABASE_URL = "jdbc:postgresql://aws-0-sa-east-1.pooler.supabase.com:5432/postgres?user=postgres.fxhccpvdtyugdbbacacv&password=puerto_retro4321";

  const SUPABASE_KEY = "puerto_retro4321";



  document.addEventListener('DOMContentLoaded', () => {

   const form = document.getElementById('loginForm');

   const usuario = document.getElementById('usuario');

   const correo = document.getElementById('correo');

   const clave = document.getElementById('clave');



   form.addEventListener('submit', async (e) => {

    e.preventDefault();



    usuario.classList.remove('border-red-500');

    correo.classList.remove('border-red-500');

    clave.classList.remove('border-red-500');



    if (!usuario.value.trim() || !correo.value.trim() || !clave.value.trim()) {

     if (!usuario.value.trim()) usuario.classList.add('border-red-500');

     if (!correo.value.trim()) correo.classList.add('border-red-500');

     if (!clave.value.trim()) clave.classList.add('border-red-500');



     Swal.fire({

      icon: 'error',

      title: 'Campos vacíos',

      text: 'Por favor completa todos los campos.'

     });

     return;

    }



    const res = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {

     method: 'POST',

     headers: {

      'Content-Type': 'application/json',

      apikey: SUPABASE_KEY,

      Authorization: `Bearer ${SUPABASE_KEY}`,

      Prefer: 'return=representation'

     },

     body: JSON.stringify({

      nombre: usuario.value.trim(),

      correo: correo.value.trim(),

      pass: clave.value.trim()

     })

    });



    if (!res.ok) {

     const errorData = await res.json();

     Swal.fire("Error", "No se pudo guardar el usuario: " + errorData.message, "error");

     return;

    }



    const data = await res.json();

    Swal.fire({

     icon: 'success',

     title: '¡Registro exitoso!',

     text: `Bienvenido, ${usuario.value}!`,

     timer: 2000,

     showConfirmButton: true

    }).then(() => {

     form.reset();

     window.location.href = 'index.html';

    });

   });

  });

 </script>

</body>

</html>